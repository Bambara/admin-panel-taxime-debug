<ngx-spinner bdColor="rgba(51, 51, 51, 0.5)" size="default" color="#3f51b5" type="ball-scale-pulse"></ngx-spinner>
<ng-snotify></ng-snotify>

<!-- <mat-card *ngIf="driverDetails?.length > 0" class="bg-primary">
    <mat-card-content>
        <h3 class="text-white">{{driverDetails[0].firstName}} {{driverDetails[0].lastName}}</h3>
    </mat-card-content>
</mat-card>

<ngb-alert [dismissible]="false" class="alert-success">
    <strong>Warning!</strong> Better check yourself, you're not looking too good.
</ngb-alert> -->
<div *ngIf="agentDetails?.length > 0">
    <!-- <div class="alert alert-danger" *ngIf="adminDetails.role == 'super' ">
        <strong><b>Super Admin</b></strong>
    </div> -->
    
    <div class="alert alert-danger" *ngIf="agentDetails[0].isEnable == false">
        <strong>Company disabled</strong>
    </div>
    
    <div class="alert alert-danger" *ngIf="agentDetails[0].wallet[0].totalWalletPoints <= 0">
        <strong>Company credit low</strong>
    </div>
</div>


<mat-card *ngIf="agentDetails?.length > 0" class="mt-4">
    <mat-card-content class="pl-3 pr-3">
        <div class="row ml-2 mb-2">
            <div>
                <img src="assets/images/agent.png" class="img-rounded" alt="image" width="100" height="100">
            </div>
            <div class="ml-3">
                <h3 class="text-dark"><b>{{agentDetails[0].companyName}}</b></h3>
                <!-- <span class="badge badge-success p-2 ml-2" *ngIf="driverDetails[0].isDispatchEnable == true">
                    <strong>Dispatcher</strong>
                </span> -->
            </div>
        </div>
        
        <div class="row">
            
            <div class="col-md-3">
                <h5 class="mt-2"><b>Company Code: </b>{{agentDetails[0].companyCode}}</h5>
            </div>
            <div class="col-md-3">
                <h5 class="mt-2"><b>Wallet Balance: </b>{{currency}} {{agentDetails[0].wallet[0].totalWalletPoints | number : '.2-2'}}</h5>
            </div>
            <div class="col-md-3">
                <h5 class="mt-2"><b>Earnings: </b>{{currency}} {{agentDetails[0].wallet[0].agentEarnings | number : '.2-2'}}</h5>
            </div>
            <div class="col-md-3">
                <h5 class="mt-2"><b>Registerd on: </b>{{agentDetails[0].recordedTime | date: 'dd/MM/yyyy'}}</h5>
            </div>
        </div>
        <!-- <div class="row">
            <div class="col-md-4">
                <h5 class="mt-2"><b>Company: </b>{{agentDetails.companyCode}}</h5>
            </div>
            <div class="col-md-4">
                <h5 class="mt-2"><b>Package Type: </b>{{agentDetails.companyCode}}</h5>
            </div>
            
        </div>

        <div class="row">
            <div class="col-md-4">
                <h5 class="mt-2"><b>Company Code: </b>{{agentDetails.companyCode}}</h5>
            </div>
        </div> -->

        <!-- tabs -->
        <div class="mt-5 mb-5">
            <ngb-tabset >
                <ngb-tab>
                    <ng-template ngbTabTitle>Info</ng-template>
                    <ng-template ngbTabContent class="">
                        
                        <div class="col-md-12 pt-4 pb-4">
                            <div class="row">
                                <div class="col-md-4">
                                
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="mt-2"><b>Owner Name: </b></h6>
                                        </div>
                                        
                                        <div class="d-flex">
                                            <h6 class="mt-2"><b>{{agentDetails[0].firstName}} {{agentDetails[0].lastName}}</b></h6>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="mt-2"><b>Mobile: </b></h6>
                                        </div>
                                        
                                        <div class="d-flex">
                                            <h6 class="mt-2"><b>{{agentDetails[0].mobile}}</b></h6>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="mt-2"><b>Email: </b></h6>
                                        </div>
                                        
                                        <div class="d-flex">
                                            <h6 class="mt-2"><b>{{agentDetails[0].email}}</b></h6>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="mt-2"><b>NIC: </b></h6>
                                        </div>
                                        
                                        <div class="d-flex">
                                            <h6 class="mt-2"><b>{{agentDetails[0].nic}}</b></h6>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="mt-2"><b>Company Code: </b></h6>
                                        </div>
                                        
                                        <div class="d-flex">
                                            <h6 class="mt-2"><b>{{agentDetails[0].companyCode}}</b></h6>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="mt-2"><b>Company Name: </b></h6>
                                        </div>
                                        
                                        <div class="d-flex">
                                            <h6 class="mt-2"><b>{{agentDetails[0].companyName}}</b></h6>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="mt-2"><b>Company Type: </b></h6>
                                        </div>
                                        
                                        <div class="d-flex">
                                            <h6 class="mt-2"><b>{{agentDetails[0].companyType}}</b></h6>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="mt-2"><b>Role: </b></h6>
                                        </div>
                                        
                                        <div class="d-flex">
                                            <h6 class="mt-2"><b>{{agentDetails[0].role}}</b></h6>
                                        </div>
                                    </div>
                                    
                                </div>
                                <div class="col-md-4">
                                    
                                </div>
                                <div class="col-md-4 text-right">
                                    <!-- <div class="text-right mb-2">
                                        <button mat-button class="btn btn-success" data-toggle="modal"
                                            data-target="#adminAddModal">Add New Admin</button>
                                    </div> -->

                                    <div class="text-right mb-2">
                                        <button mat-button class="btn btn-primary" data-toggle="modal"
                                            data-target="#walletRechargeModal">Recharge Wallet</button>
                                    </div>

                                    <div class="text-right mb-2">
                                        <button mat-button class="btn btn-warning" data-toggle="modal"
                                            data-target="#adminUpdateModal">Edit Profile</button>
                                    </div>

                                    <div class="text-right mb-2">
                                        <button mat-button class="btn btn-warning" data-toggle="modal"
                                            data-target="#adminUpdatePasswordModal">Change Password</button>
                                    </div>

                                    

                                </div>
                            </div>
                            

                        </div>

                    </ng-template>
                </ngb-tab>
                
                <ngb-tab class="">
                    <ng-template ngbTabTitle>
                        <div (click)="getAgentDriversData(agentDetails[0].companyCode)">Drivers</div>
                    </ng-template>
                    <ng-template ngbTabContent>
                        
                        <div class="col-md-12 pt-4 pb-4" *ngIf="driverData?.length > 0">

                            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="hover">

                                <thead>
                                    <tr>
                                        <th>
                                            #
                                        </th>
                                        <th>
                                            Name
                                        </th>
                                        <th>
                                            Mobile
                                        </th>
                                        <th>
                                            Approved
                                        </th>
                                        <th>
                                            Dispatcher
                                        </th>
                                        <th>
                                            Driver Code
                                        </th>
                                        <th>
                                            Created
                                        </th>
                                        <th class="text-right">
                                            Action
                                        </th>
                                    </tr>
                                </thead>
                          
                                <tbody>
                                    <!-- <br> -->
                                    <tr *ngFor="let driver of driverData; let i = index" style="font-weight:10">
                                        <td>
                                            {{i+1}}
                                        </td>
                                        <td>
                                            {{driver?.firstName}} {{driver?.lastName}}
                                        </td>
                                        <td>
                                            {{driver?.mobile}}
                                        </td>
                                        <td>
                                            <span class="badge badge-info p-1 pl-2 pr-2">
                                                <strong>{{driver?.isApproved}}</strong>
                                            </span>
                                        </td>
                                        <td>
                                            <span class="badge badge-info p-1 pl-2 pr-2">
                                                <strong>{{driver?.isDispatchEnable}}</strong>
                                            </span>
                                        </td>
                                        <td>
                                            {{driver?.driverCode}}
                                        </td>
                                        
                                        <td>
                                            {{driver?.recordedTime | date: 'yyyy-MM-dd'}}
                                            {{driver?.recordedTime | date: 'hh:mm.ss a'}}
                                        </td>
                                        <td>
                                            <div class="text-right mb-2">
                                                <button mat-button class="btn btn-info btn-sm ml-1 text-white"
                                                
                                                data-toggle="tooltip" title="Click here to view driver profile">
                                                        View Profile</button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>

                        <!-- <div class="col-md-12 pt-4 pb-4" *ngIf="allAdmins?.length <= 0">
                            <mat-card-title>
                                <h4>No data found</h4>
                            </mat-card-title>
                        </div> -->

                    </ng-template>
                </ngb-tab>

                <ngb-tab class="">
                    <ng-template ngbTabTitle>
                        <div (click)="getAgentTransactionData(agentDetails[0]._id)">Transactions</div>
                    </ng-template>
                    <ng-template ngbTabContent>
                        
                        <div class="col-md-12 pt-4 pb-4" *ngIf="transactionData">

                            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="hover">

                                <thead>
                                    <tr>
                                        <th>
                                            #
                                        </th>
                                        <th>
                                            Method
                                        </th>
                                        <th>
                                            Type
                                        </th>
                                        <th>
                                            Amount
                                        </th>
                                        <th>
                                            Trip Earning
                                        </th>
                                        <th>
                                            Total Trip Cost
                                        </th>
                                        <th>
                                            Credited
                                        </th>
                                        <th>
                                            Created
                                        </th>
                                        <!-- <th>
                                            Action
                                        </th> -->
                                    </tr>
                                </thead>
                          
                                <tbody>
                                    <!-- <br> -->
                                    <tr *ngFor="let transaction of transactionData.transactionHistory; let i = index" style="font-weight:10">
                                        <td>
                                            {{i+1}}
                                        </td>
                                        <td>
                                            {{transaction?.method}}
                                        </td>
                                        <td>
                                            <span class="badge badge-info p-2 ml-2">
                                                <strong>{{transaction?.transactionType}}</strong>
                                            </span>
                                        </td>
                                        <td>
                                            <span class="badge badge-success p-1 pl-2 pr-2">
                                                <strong>{{currency}} {{transaction?.transactionAmount | number : '1.2-2'}}</strong>
                                            </span>
                                        </td>
                                        <td>
                                            <span class="badge badge-success p-1 pl-2 pr-2">
                                                <strong>{{currency}} {{transaction?.trip.tripEarning | number : '1.2-2'}}</strong>
                                            </span>
                                        </td>
                                        <td>
                                            <span class="badge badge-success p-1 pl-2 pr-2">
                                                <strong>{{currency}} {{transaction?.trip.totalTripValue | number : '1.2-2'}}</strong>
                                            </span>
                                        </td>
                                        <td>
                                            <span class="badge badge-success p-1 pl-2 pr-2">
                                                <strong>{{transaction?.isCredited}}</strong>
                                            </span>
                                        </td>
                                        <td>
                                            {{transaction?.dateTime | date: 'yyyy-MM-dd'}}
                                            {{transaction?.dateTime | date: 'hh:mm.ss a'}}
                                        </td>
                                        <!-- <td *ngIf="adminDetails.role == 'super' ">
                                            <div class="text-right mb-2">
                                                <button mat-button class="btn btn-info btn-sm ml-1 text-white"
                                                
                                                data-toggle="tooltip" title="Click here to view admin profile">
                                                        View Profile</button>
                                            </div>
                                        </td> -->
                                    </tr>
                                </tbody>
                            </table>

                        </div>

                        <!-- <div class="col-md-12 pt-4 pb-4" *ngIf="allAdmins?.length <= 0">
                            <mat-card-title>
                                <h4>No data found</h4>
                            </mat-card-title>
                        </div> -->

                    </ng-template>
                </ngb-tab>
                <!-- <ngb-tab title="Permissions" class="" *ngIf="adminDetails.role == 'super' ">
                    <ng-template ngbTabContent>
                        
                        <div class="col-md-12 pt-4 pb-4">
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Brand Name: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{vehicleData.vehicleBrandName}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Model: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{vehicleData.vehicleModel}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Color: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{vehicleData.vehicleColor}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Registration No: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{vehicleData.vehicleRegistrationNo}}</b></h6>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Owner Name: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{vehicleData.ownerInfo.ownerContactName}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Owner Email: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{vehicleData.ownerInfo.ownerContactEmail}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Owner Contact Number: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{vehicleData.ownerInfo.ownerContactNumber}}</b></h6>
                                </div>
                            </div>
                            
                            

                            <div class="row mt-4">
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>Revenue: </b></h6>
                                    <img src="{{vehicleData.vehicleRevenuePic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>Front: </b></h6>
                                    <img src="{{vehicleData.vehicleFrontPic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>Insurance: </b></h6>
                                    <img src="{{vehicleData.vehicleInsurancePic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>Book: </b></h6>
                                    <img src="{{vehicleData.vehicleBookPic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>Side View: </b></h6>
                                    <img src="{{vehicleData.vehicleSideViewPic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                            </div>


                        </div>

                    </ng-template>
                </ngb-tab> -->
                <!-- <ngb-tab title="Dispatcher" class="" *ngIf="driverDetails[0].isDispatchEnable == true">
                    <ng-template ngbTabContent>
                        
                        <div class="col-md-12 pt-4 pb-4">
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Dispatcher Type: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{driverDetails[0].dispatcher[0].type}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Registerd on: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{driverDetails[0].dispatcher[0].recordedTime | date: 'dd/MM/yyyy'}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>From: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{driverDetails[0].dispatcher[0].commission.fromDate | date: 'dd/MM/yyyy'}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>To: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{driverDetails[0].dispatcher[0].commission.toDate | date: 'dd/MM/yyyy'}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Admin Commission: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{driverDetails[0].dispatcher[0].commission.dispatchAdminCommission}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Dispatcher Commission: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{driverDetails[0].dispatcher[0].commission.dispatcherCommission}}</b></h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <h6 class="mt-2"><b>Dispatch Package Type: </b></h6>
                                </div>
                                
                                <div class="d-flex">
                                    <h6 class="mt-2"><b>{{driverDetails[0].dispatcher[0].dispatchPackageType}}</b></h6>
                                </div>
                            </div>
                            
                            

                        </div>


                    </ng-template>
                </ngb-tab> -->
                <!-- <ngb-tab class="">
                    <ng-template ngbTabTitle>
                        <div (click)="getAdminList()">Admins</div>
                    </ng-template>
                    <ng-template ngbTabContent>
                        
                        <div class="col-md-12 pt-4 pb-4" *ngIf="allAdmins?.length > 0">

                            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="hover">

                                <thead>
                                    <tr>
                                        <th>
                                            Role
                                        </th>
                                        <th>
                                            Name
                                        </th>
                                        <th>
                                            Mobile
                                        </th>
                                        <th>
                                            Status
                                        </th>
                                        <th>
                                            Last Login
                                        </th>
                                        <th>
                                            Created
                                        </th>
                                        <th class="" *ngIf="adminDetails.role == 'super' ">
                                            Action
                                        </th>
                                    </tr>
                                </thead>
                          
                                <tbody>
                                    
                                    <tr *ngFor="let adminData of allAdmins; let i = index" style="font-weight:10">
                                        <td>
                                            <span class="badge badge-danger p-2 ml-2" *ngIf="adminData.role == 'super' ">
                                                <strong>Super</strong>
                                            </span>
                                            <strong *ngIf="adminData.role != 'super' ">{{adminData?.role}}</strong>
                                        </td>
                                        <td>
                                            {{adminData?.firstName}}
                                        </td>
                                        <td>
                                            {{adminData?.mobile}}
                                        </td>
                                        <td>
                                            <span class="badge badge-success p-2 ml-2" *ngIf="adminData?.isEnable == true">
                                                <strong>Enabled</strong>
                                            </span>
                                            <span class="badge badge-danger p-2 ml-2" *ngIf="adminData?.isEnable == false">
                                                <strong>Disabled</strong>
                                            </span>
                                        </td>
                                        <td>
                                            {{adminData?.lastLogin | date: 'yyyy-MM-dd'}}
                                            {{adminData?.lastLogin | date: 'hh:mm.ss a'}}
                                        </td>
                                        <td>
                                            {{adminData?.recordedTime | date: 'yyyy-MM-dd'}}
                                            {{adminData?.recordedTime | date: 'hh:mm.ss a'}}
                                        </td>
                                        <td *ngIf="adminDetails.role == 'super' ">
                                            <div class="text-right mb-2">
                                                <button mat-button class="btn btn-info btn-sm ml-1 text-white"
                                                
                                                data-toggle="tooltip" title="Click here to view admin profile">
                                                        View Profile</button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>

                        

                    </ng-template>
                </ngb-tab> -->
                <!-- <ngb-tab title="Operations" class="">
                    <ng-template ngbTabContent>
                        
                        <div class="col-md-12 pt-4 pb-4">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-2">
                                        <button mat-button class="btn btn-success" data-toggle="modal"
                                            data-target="#adminAddModal">Add New Admin</button>
                                    </div>
                                    
    
                                </div>
                                <div class="col-md-4">
                                    
                                    
    
                                </div>
                                <div class="col-md-4">
                                    
                                    
    
                                </div>
                            </div>
                            
                        </div>

                    </ng-template>
                </ngb-tab> -->
                <!-- <ngb-tab title="Logs" class="" *ngIf="adminDetails.role == 'super' ">
                    <ng-template ngbTabContent>
                        
                        <div class="col-md-12 pt-4 pb-4">
                            <div class="row mt-4">
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>Driver: </b></h6>
                                    <img src="{{driverDetails[0].driverPic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>Driver Licence Front: </b></h6>
                                    <img src="{{driverDetails[0].drivingLicenceFrontPic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>Driver Licence Back: </b></h6>
                                    <img src="{{driverDetails[0].drivingLicenceBackPic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>NIC Front: </b></h6>
                                    <img src="{{driverDetails[0].nicFrontPic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                <div class="col-md-3">
                                    <h6 class="mt-2"><b>NIC Back: </b></h6>
                                    <img src="{{driverDetails[0].nicBackPic}}" class="img-rounded" alt="driver-image" width="200" height="200">
                                </div>
                                
                            </div>
                        </div>

                    </ng-template>
                </ngb-tab> -->
            </ngb-tabset>
        </div>
            
            
        
        

        

    </mat-card-content>
</mat-card>

<mat-card *ngIf="agentDetails == null">
    <mat-card-content>
        <h2>Agent not found</h2>
    </mat-card-content>
</mat-card>


<!-- add new admin modal -->
<!-- <div class="modal fade bd-example-modal-lg" id="adminAddModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
        <div class="modal-header bg-primary">
            <h5 class="modal-title text-white" id="exampleModalLabel">Add New Admin</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <label for="driverId">Admin Role</label>
                    <ng-select class="" 
                        placeholder="Select Admin Role"
                        [items]="adminRoles" 
                        bindLabel="roleName"
                        bindValue="roleName"
                        name="role"
                        id="role"
                        formControlName="role"
                        [ngClass]="{ 'is-invalid': submitted && validate.role.errors}">
                        <div *ngIf="submitted && validate.role.errors" class="invalid-feedback">
                            <div *ngIf="validate.role.errors.required">Admin role is required</div>
                        </div>
                    </ng-select>
                    
                </div>
                <div class="form-group row">
                    <div class="col-md-6">
                        <label for="firstName">First Name</label>
                        <input class="form-control form-control-sm" id="firstName" type="text" formControlName="firstName"
                            placeholder="Enter First Name"
                            [ngClass]="{ 'is-invalid': submitted && validate.firstName.errors }">
                        <div *ngIf="submitted && validate.firstName.errors" class="invalid-feedback">
                            <div *ngIf="validate.firstName.errors.required">First Name is required</div>
                        </div>
                    </div>
    
                    <div class="col-md-6">
                        <label for="lastName">Last Name</label>
                        <input class="form-control form-control-sm" id="lastName" type="text" formControlName="lastName"
                            placeholder="Enter Last Name"
                            [ngClass]="{ 'is-invalid': submitted && validate.lastName.errors }">
                        <div *ngIf="submitted && validate.lastName.errors" class="invalid-feedback">
                            <div *ngIf="validate.lastName.errors.required">Last Name is required</div>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-6">
                        <label for="mobile">Mobile</label>
                        <input class="form-control form-control-sm" id="mobile" type="text" placeholder="Enter Mobile Number"
                            formControlName="mobile"
                            [ngClass]="{ 'is-invalid': submitted && validate.mobile.errors }">
                        <div *ngIf="submitted && validate.mobile.errors" class="invalid-feedback">
                            <div *ngIf="validate.mobile.errors.required">Mobile Number is required</div>
                            <div *ngIf="validate.mobile.errors.pattern">Mobile number must be a valid number</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="exampleInputEmail1">Email address</label>
                        <input type="email" class="form-control form-control-sm" id="email" aria-describedby="emailHelp"
                        formControlName="email" placeholder="Enter email"
                        [ngClass]="{ 'is-invalid': submitted && validate.email.errors }">
                        <div *ngIf="submitted && validate.email.errors" class="invalid-feedback">
                            <div *ngIf="validate.email.errors.required">Email is required</div>
                            <div *ngIf="validate.email.errors.email">Email must be a valid email address</div>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-4">
                        <label for="nic">NIC</label>
                        <input class="form-control form-control-sm" id="nic" type="text" placeholder="Enter NIC Number"
                            formControlName="nic"
                            [ngClass]="{ 'is-invalid': submitted && validate.nic.errors }">
                        <div *ngIf="submitted && validate.nic.errors" class="invalid-feedback">
                            <div *ngIf="validate.nic.errors.required">NIC Number is required</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label for="birthday">Birthday</label>
                        <input class="form-control form-control-sm" type="date" placeholder="yyyy-mm-dd" name="birthday"
                            formControlName="birthday"
                            [ngClass]="{ 'is-invalid': submitted && validate.birthday.errors }">
                        <div *ngIf="submitted && validate.birthday.errors" class="invalid-feedback">
                            <div *ngIf="validate.birthday.errors.required">Birthday is required</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label for="mobile">Gender</label><br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="male" value="male"
                            formControlName="gender" [ngClass]="{ 'is-invalid': submitted && validate.gender.errors }">
                            <label class="form-check-label" for="male">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="female" value="female"
                            formControlName="gender" [ngClass]="{ 'is-invalid': submitted && validate.gender.errors }">
                            <label class="form-check-label" for="female">Female</label>
                        </div>
                        
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-md-12">
                        <label for="address">Address</label>
                    </div>
                    <div class="col-md-3">
                        <input class="form-control form-control-sm" id="address" type="text" placeholder="No."
                            formControlName="address"
                            [ngClass]="{ 'is-invalid': submitted && validate.address.errors }">
                        <div *ngIf="submitted && validate.address.errors" class="invalid-feedback">
                            <div *ngIf="validate.address.errors.required">Number is required</div>
                        </div>
                    </div>
    
                    <div class="col-md-5">
                        <input class="form-control form-control-sm" id="street" type="text" placeholder="Street"
                            formControlName="street"
                            [ngClass]="{ 'is-invalid': submitted && validate.street.errors }">
                        <div *ngIf="submitted && validate.street.errors" class="invalid-feedback">
                            <div *ngIf="validate.street.errors.required">Street is required</div>
                        </div>
                    </div>
    
                    <div class="col-md-4">
                        <input class="form-control form-control-sm" id="city" type="text" placeholder="City"
                            formControlName="city"
                            [ngClass]="{ 'is-invalid': submitted && validate.city.errors }">
                        <div *ngIf="submitted && validate.city.errors" class="invalid-feedback">
                            <div *ngIf="validate.city.errors.required">City is required</div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="close-modal" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" (click)="onSubmit()"> Submit</button>
        </div>
        </div>
    </div>
</div> -->

<!-- update admin modal -->
<!-- <div class="modal fade bd-example-modal-lg" id="adminUpdateModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true" *ngIf="adminDetails != null">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
        <div class="modal-header bg-primary">
            <h5 class="modal-title text-white" id="exampleModalLabel">Update Admin</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <form [formGroup]="updateForm" (ngSubmit)="updateOnSubmit()">
                <div class="form-group">
                    <label for="driverId">Admin Role</label>
                    <ng-select class="" 
                        placeholder="Select Admin Role"
                        [(ngModel)]="adminDetails.role"
                        [items]="adminRoles" 
                        bindLabel="roleName"
                        bindValue="roleName"
                        name="role"
                        id="role"
                        formControlName="role"
                        [ngClass]="{ 'is-invalid': updated && validateUpdateForm.role.errors}">
                        <div *ngIf="updated && validateUpdateForm.role.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.role.errors.required">Admin role is required</div>
                        </div>
                    </ng-select>
                    
                </div>
                <div class="form-group row">
                    <div class="col-md-6">
                        <label for="firstName">First Name</label>
                        <input class="form-control form-control-sm" id="firstName" type="text" formControlName="firstName"
                            placeholder="Enter First Name" [(ngModel)]="adminDetails.firstName"
                            [ngClass]="{ 'is-invalid': updated && validateUpdateForm.firstName.errors }">
                        <div *ngIf="updated && validateUpdateForm.firstName.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.firstName.errors.required">First Name is required</div>
                        </div>
                    </div>
    
                    <div class="col-md-6">
                        <label for="lastName">Last Name</label>
                        <input class="form-control form-control-sm" id="lastName" type="text" formControlName="lastName"
                            placeholder="Enter Last Name" [(ngModel)]="adminDetails.lastName"
                            [ngClass]="{ 'is-invalid': updated && validateUpdateForm.lastName.errors }">
                        <div *ngIf="updated && validateUpdateForm.lastName.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.lastName.errors.required">Last Name is required</div>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-6">
                        <label for="mobile">Mobile</label>
                        <input class="form-control form-control-sm" id="mobile" type="text" placeholder="Enter Mobile Number"
                            formControlName="mobile" [(ngModel)]="adminDetails.mobile"
                            [ngClass]="{ 'is-invalid': updated && validateUpdateForm.mobile.errors }">
                        <div *ngIf="updated && validateUpdateForm.mobile.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.mobile.errors.required">Mobile Number is required</div>
                            <div *ngIf="validateUpdateForm.mobile.errors.pattern">Mobile number must be a valid number</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="exampleInputEmail1">Email address</label>
                        <input type="email" class="form-control form-control-sm" id="email" aria-describedby="emailHelp"
                        formControlName="email" placeholder="Enter email" [(ngModel)]="adminDetails.email"
                        [ngClass]="{ 'is-invalid': updated && validateUpdateForm.email.errors }">
                        <div *ngIf="updated && validateUpdateForm.email.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.email.errors.required">Email is required</div>
                            <div *ngIf="validateUpdateForm.email.errors.email">Email must be a valid email address</div>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-4">
                        <label for="nic">NIC</label>
                        <input class="form-control form-control-sm" id="nic" type="text" placeholder="Enter NIC Number"
                            formControlName="nic" [(ngModel)]="adminDetails.nic"
                            [ngClass]="{ 'is-invalid': updated && validateUpdateForm.nic.errors }">
                        <div *ngIf="updated && validateUpdateForm.nic.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.nic.errors.required">NIC Number is required</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label for="birthday">Birthday</label>
                        <input class="form-control form-control-sm" type="date" placeholder="yyyy-mm-dd" name="birthday"
                            formControlName="birthday" [(ngModel)]="adminDetails.birthday"
                            [ngClass]="{ 'is-invalid': updated && validateUpdateForm.birthday.errors }">
                        <div *ngIf="updated && validateUpdateForm.birthday.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.birthday.errors.required">Birthday is required</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label for="mobile">Gender</label><br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="male" value="male"
                            formControlName="gender" [(ngModel)]="adminDetails.gender" [ngClass]="{ 'is-invalid': updated && validateUpdateForm.gender.errors }">
                            <label class="form-check-label" for="male">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="female" value="female"
                            formControlName="gender" [(ngModel)]="adminDetails.gender" [ngClass]="{ 'is-invalid': updated && validateUpdateForm.gender.errors }">
                            <label class="form-check-label" for="female">Female</label>
                        </div>
                        
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-md-12">
                        <label for="address">Address</label>
                    </div>
                    <div class="col-md-3">
                        <input class="form-control form-control-sm" id="address" type="text" placeholder="No."
                            formControlName="address" [(ngModel)]="adminDetails.address.address"
                            [ngClass]="{ 'is-invalid': updated && validateUpdateForm.address.errors }">
                        <div *ngIf="updated && validateUpdateForm.address.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.address.errors.required">Number is required</div>
                        </div>
                    </div>
    
                    <div class="col-md-5">
                        <input class="form-control form-control-sm" id="street" type="text" placeholder="Street"
                            formControlName="street" [(ngModel)]="adminDetails.address.street"
                            [ngClass]="{ 'is-invalid': updated && validateUpdateForm.street.errors }">
                        <div *ngIf="updated && validateUpdateForm.street.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.street.errors.required">Street is required</div>
                        </div>
                    </div>
    
                    <div class="col-md-4">
                        <input class="form-control form-control-sm" id="city" type="text" placeholder="City"
                            formControlName="city" [(ngModel)]="adminDetails.address.city"
                            [ngClass]="{ 'is-invalid': updated && validateUpdateForm.city.errors }">
                        <div *ngIf="updated && validateUpdateForm.city.errors" class="invalid-feedback">
                            <div *ngIf="validateUpdateForm.city.errors.required">City is required</div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="close-update-modal" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" (click)="updateOnSubmit()"> Submit</button>
        </div>
        </div>
    </div>
</div> -->

<!-- wallet recharge -->
<div class="modal fade bd-example-modal-lg" id="walletRechargeModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <h5 class="modal-title text-white" id="exampleModalLabel">Recharge Agent Wallet</h5>
                <button type="button" class="close" id="close-modal" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" *ngIf="agentDetails?.length > 0">
                
                <div class="row">
                    <div class="col-md-12 mt-3 mb-3">
                        <h4><b>Wallet Balance: {{currency}} {{ agentDetails[0].wallet[0].totalWalletPoints | number : '.2-2' }}</b></h4>
                    </div>
                </div>
                

                <div class="row">
                    <div class="col-md-4">
                        <label id="label">Points</label>
                        <input type="number" class="form-control form-control-sm" id="walletPoints" placeholder=" "
                        name="rechargeAmount" [(ngModel)]="rechargeAmount">
                    </div>
                    
                    <!-- <div class="col-md-8" *ngIf="promoDetails?.length > 0 && agentDetails[0].wallet[0].promocode > 0">
                        <label id="label">Active Offers</label>
                        
                        <div class="row">
                            <div class="col-md-12" *ngFor="let promo of agentDetails[0].wallet[0].promocode; let i = index">
                                <span class="badge badge-success p-2" *ngIf="promoDetails[0].promocode != promo.promocode ">
                                    <strong>{{promoDetails[0].name}} : Bonus {{promoDetails[0].commission}}%</strong>
                                </span>
                            </div>
                        </div>

                    </div> -->

                    <div class="col-md-8" *ngIf="promoDetails?.length > 0 && agentDetails[0].wallet[0].promocode?.length == 0">
                        <label id="label">Active Offers</label>
                        <div class="row">
                            <div class="col-md-12">
                                <span class="badge badge-success p-2">
                                    <strong>{{promoDetails[0].name}} : Bonus {{promoDetails[0].commission}}%</strong>
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-md-8">
                        <label id="label">Method</label>
                        <input type="text" class="form-control form-control-sm" id="walletMethod" placeholder=" "
                        name="rechargeMethod" [(ngModel)]="rechargeMethod">
                    </div> -->
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <label id="label">Description</label>
                        <textarea type="text" class="form-control form-control-sm" id="walletDescription"
                        placeholder=" " name="rechargeDescription" [(ngModel)]="rechargeDescription"></textarea>
                    </div>
                </div>
                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="close-recharge-modal" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary pull-right" (click)="rechargeAgentWallet()">Recharge</button>
            </div>
        </div>
    </div>
</div>
